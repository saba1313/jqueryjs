<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
		<title>Draggables Beta</title>
		<script type="text/javascript" src="firebug/firebug.js"></script>
		<script type="text/javascript" src="../../jquery/src/jquery/jquery.js"></script>
		<script type="text/javascript" src="../../jquery/src/event/event.js"></script>
		<script type="text/javascript" src="../../jquery/src/fx/fx.js"></script>
		<script type="text/javascript" src="../../jquery/src/ajax/ajax.js"></script>
		<script type="text/javascript" src="../../jquery_plugins/dimensions/dimensions.js"></script>
		<style type="text/css">
			body {
				font-family: Arial, Helvetica, sans-serif;
			}
			div.content {
				background: #eee;
				border: 2px solid #999;
				padding: 10px;
				margin: 0 auto;
				width: 80%;
				text-align: center;
				color: #666;
			}
			div.content span {
				color: #000;
			}
			
			div.area {
				background: #C6E5FF;
				border: 2px solid #b6d5eF;
				padding: 10px;
				margin: 0 auto;
				margin-top: 10px;
				width: 80%;
				text-align: center;
				color: #888;
			}
			
			div.drag {
				border: 2px solid darkgreen;
				width: 120px;
				height: 120px;
				background-color: lightgreen;
				padding: 5px;
				float: left;
				margin: 5px;
			}

			div.drop {
				border: 2px solid darkred;
				width: 120px;
				height: 120px;
				background-color: orange;
				padding: 5px;
				float: left;
				margin: 5px;
			}
			
			div.helper {
				border: 1px dotted black;
				background: #eee;
				color: #000;
				opacity: 0.8;
				width: 100px;
				height: 20px;
				z-index: 1000;
			}
			
			table tr td {
				text-align: left;
			}
			
			h2 {
				border-bottom: 2px solid #777;
				text-align: right;
			}
			
		</style>
		<script type="text/javascript" src="draggables.js"></script>
		<script type="text/javascript">
			$(document).ready(function() {
				
				$("div.drag").makeDraggable({
					handle: "div",
					onStart: function(helper) {
						$(helper).css("width", this.offsetWidth-1+"px").css("height", this.offsetHeight-1+"px");
					},
					onStop: function() {
					},
					onDrag: function(helper,x,y) {
						//$(helper).html("Position: ["+x+","+y+"]");
					},
					helper: function() {
						var helper = document.createElement("div");
						$(helper).attr("className", "helper");
						return helper;
					},
					dragPrevention: 0,
					dragPreventionOn: "a,input",
					cursorAt: {right: -10, bottom: -10 },
					scroll: 20
				});
				
				$("div.drop").makeDroppable({
					accept: "drag",
					onHover: function(drag, helper) {
						$(helper).html("I'm over outer");
						$(this).css("border", "5px solid black");
					},
					onOut: function(drag, helper) {
						$(this).css("border", "");
						$(helper).html("");
					},
					onDrop: function(drag) {
						$(this).css("border", "");
						$("span", this).html("dropped on outer!");
					},
					greedy: true
				});
				
				$("#ddrop").makeDroppable({
					accept: "drag",
					onHover: function(drag, helper) {
						$(this).css("border", "5px solid black");
						$(helper).html("I'm over inner");
					},
					onOut: function(drag,helper) {
						$(this).css("border", "1px solid black");
						$(helper).html(helper.oldContent);
					},
					onDrop: function(drag) {
						$(this).css("border", "1px solid black");
						$(this).html("dropped on inner!");
					}
				});
				
			});
			
		</script>
	</head>
	<body>
		<div class="content">
			<p>This is the new Drag & Drop testing area. The new draggables and droppables are focused to be faster then any of the current well-known libraries, and to provide helper based instead of clone based drag/drop.</p>
			<p>While it does not have features like grid and opacity and such stuff, I focused on intelligent methods rather than two many getters and setters. Stefan Petre helped me with his excellent support while I was writing this library. It will become a part of Interface (probably v.2.0).</p>
			<p>It has one major thing you have to consider: The cursor must not be under any circumstances on top of the helper. This is why there are now grid options for example (Actually grid for a helper doesn't make much sense anyway doh). Remember: Use this if you want to implement indicational dragging. If you really want to build a puzzle or something, where you want to move objects visually, please stick to the alternatives.</p>

			<h2>Faster draggables!</h2>
			<p>The features of the draggables include:<br>
			<center><div style="text-align: left; width: 600px;"><ul>
				<li><b>Automatic scrolling</b></li>
				<li>no DOM recursing methods -> <b>makes it faster</b>..a LOT faster</li>
				<li>Helper based (Full access to helper via callback function) (see Yahoo Mail)</li>
				<li><b>Dragging over iframes</b></li>
				<li><b>Automatic wrapping</b> of the helper when coming to a side</li>
				<li>Advanced <b>drag prevention</b></li>
			</ul>
			</div></center>
			</p>
			<h2>Options for draggables:</h2>
			<p>Syntax: <span>$(".ohmy").makeDraggable({ options });</span></p>
			<p>
<table cellpadding="5" cellspacing="0" border="0">
	<tr>
		<td><b>option</b></td>
		<td><b>standard value</b></td>
		<td><b>description</b></td>
	</tr>
	<tr>
		<td>handle</td>
		<td>$(this)</td>
		<td>String. You can specify your handle (where you can start dragging) via String as in jQuery's Filter. Example: "#myhandle" or "div:first-child".</td>
	</tr>
	<tr>
		<td>helper</td>
		<td>""</td>
		<td>String/Function. If you set a string, a empty div is created as helper, which has the className defined in the String.</td>
	</tr>
	<tr>
		<td>dragPrevention</td>
		<td>0</td>
		<td>Number. This controls the number of pixels the cursor must move after clicking to start the dragging. That means, to control unwanted dragging.</td>
	</tr>
	<tr>
		<td>dragPreventionOn</td>
		<td>"input,textarea,button"</td>
		<td>Commata-seperated String. Define child elements of your draggable on which you cannot start dragging.</td>
	</tr>
	<tr>
		<td>cursorAt</td>
		<td>{ top: -1, left: -1 }</td>
		<td>Hash. This defines the offset between helper and cursor. Note: Values have to be negative, because the Cursor may not be on top of the helper.</td>
	</tr>
	<tr>
		<td>iframeFix</td>
		<td>true</td>
		<td>Boolean. If enabled, all iframes on the page are measured if you start dragging. Then, a transparent div is layed on top of each, so that you can harmlessly drag over them without interrogation. Enabled by default. Requires dimensions.js.</td>
	</tr>
	<tr>
		<td>wrapHelper</td>
		<td>true</td>
		<td>Boolean. If enabled, the helper will mirror its position to the left side when coming with the cursor to the right side. Same with bottom. Enabled by default. Requires dimensions.js.</td>
	</tr>
	<tr>
		<td>scroll</td>
		<td>20</td>
		<td>Number/Boolean. If a number is set, automatic scrolling is done when the cursor is less then 10px at a side of the window. For no automatic scrolling, you can set this option to 'false'.</td>
	</tr>
	<tr>
		<td>onStart</td>
		<td>false</td>
		<td>Callback function. It gets the helper as first argument, while 'this' refers to the original element.</td>
	</tr>
	<tr>
		<td>onStop</td>
		<td>false</td>
		<td>Callback function. No arguments. 'this' refers to the original element.</td>
	</tr>
	<tr>
		<td>onDrag</td>
		<td>false</td>
		<td>Callback function. Gets the following arguments in this order: Helper, horizontal position of cursor, vertical position of cursor. 'this' refers to the original element.</td>
	</tr>
</table>

			</p>
			<h2>Faster droppables!</h2>
			<p>The features of the droppables include:<br>
			<center><div style="text-align: left; width: 600px;"><ul>
				<li>no DOM recursing methods -> <b>makes it faster</b>..a LOT faster</li>
				<li>Conditional function in accept property: Accept what you want!</li>
				<li>greedy option: Fire all child events or only the most inner</li>
			</ul>
			</div></center>
			</p>
			<h2>Options for droppables:</h2>
			<p>Syntax: <span>$(".ohmy").makeDroppable({ options });</span></p>
			<p>
<table cellpadding="5" cellspacing="0" border="0">
	<tr>
		<td><b>option</b></td>
		<td><b>standard value</b></td>
		<td><b>description</b></td>
	</tr>
	<tr>
		<td>accept</td>
		<td>-</td>
		<td>String or function. This specifies what draggables you want to accept for the droppable. You can either insert a string, then all draggables that have this String as class name wil be affected. If you specify a function, you get the draggable as first argument and 'this' references to the droppable. In this function, you can make your custom check, then return true/false.</td>
	</tr>
	<tr>
		<td>onHover</td>
		<td>false</td>
		<td>Callback function that fires when you move over a droppable. It gets the draggable as first argument, its helper as second argument, while 'this' refers to the droppable.</td>
	</tr>
	<tr>
		<td>onOut</td>
		<td>function(drag,helper) { $(helper).html(helper.oldContent); }</td>
		<td>Callback function that fires when you move out of a droppable. It gets the draggable as first argument, its helper as second argument, while 'this' refers to the droppable.</td>
	</tr>
	<tr>
		<td>onDrop</td>
		<td>false</td>
		<td>Callback function that fires when a valid draggable is dropped. It gets the draggable as first argument, its helper as second argument, while 'this' refers to the droppable.</td>
	</tr>
	<tr>
		<td>greedy</td>
		<td>false</td>
		<td>Boolean. If you have a droppable within a droppable, and you drop over the child droppable, both onDrop callbacks (outer and inner droppable) are fired. If you set this to true, only the onDrop event of the child fires.</td>
	</tr>
</table>

			</p>
		</div>
		
		<div class="area" style="height: 300px;">
			<div class="drag">I'm a draggable with a <a href="http://www.jquery.com">link</a> and a input. <input style="width: 100px;" type="text" value="form element"></div>
			<div class="drag">I'm a draggable with a<div style="border: 1px solid black; padding: 2px;">handle.</div></div>
			<div class="drop"><span>Im' a droppable.</span> <div id="ddrop" style="border: 1px solid black; padding: 2px; font-size: 10pt;">I'm a different droppable.</div></div>
			<iframe style="float: left; margin: 5px; border: 1px solid black" name="iframe1" id="iframe1" width="130" height="130" src="http://www.google.com"></iframe>
		</div>
		
	</body>
</html>
