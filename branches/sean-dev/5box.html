<style>
.uiBox {
  padding-top: 40px;
  padding-bottom: 20px;
  overflow: hidden;
  text-align: left;
}

.uiBox .top.pane {
  height: 40px;
  background: #333;
  margin-top: -40px;
  overflow: none;
}

.uiBox .middle.pane {
  padding-left: 40px;
  padding-right: 20px;
  position: relative;
  overflow: hidden;
}

.uiBox .middle.pane .left.pane {
  background: #444;
  width: 40px;
  margin-left: -40px;
  height: 100%;
  float: left;
  overflow: none;
}

.uiBox .middle.pane .center.pane {
  width: 100%;
  height: 100%;
  background: #555;
  float: left;
  overflow: none;
}

.uiBox .middle.pane .right.pane {
  background: #666;
  width: 20px;
  margin-right: -20px;
  height: 100%;
  float: left;
  overflow: none;
}

.uiBox .bottom.pane {
  height: 20px;
  background: #777;
  margin-bottom: -20px;
  overflow: none;
}

#example {
  position:absolute;
  background:#050;
  opacity:0.3;
  filter:alpha(opacity=30);
}

#test , #example {
  width: 200px;
  height: 200px;
}

div.dialog .top.pane {
	height: 20px;
	background: transparent;
	border-bottom: 2px solid #d3d7cf;
	position: relative;
}

div.dialog .middle.pane {
	padding-left: 2px;
	padding-right: 2px;
}

div.dialog .middle.pane .center.pane {
	background: #fff;
}

div.dialog .middle.pane .left.pane {
	width: 2px;
	margin-left: -2px;
	background: #d3d7cf;
}

div.dialog .middle.pane .right.pane {
	width: 2px;
	margin-right: -2px;
	background: #d3d7cf;
}

div.dialog .bottom.pane {
	height: 2px;
	background: #d3d7cf;
	position: relative;
}

div.dialog .top.pane .right {
	position: absolute;
	top: 2px;
	right: 2px;
}

div.dialog .top.pane .left {
	font-family: Helvetica;
	font-size: 14px;
	border-top: 2px solid #204a87;
	background: #d3d7cf;
	padding: 2px 5px;
	display: block;
	position: absolute;
	top: 0px;
	left: 0px;
}

div.dialog .bottom.pane .right {
	position: absolute;
	top: -6px;
	right: 0px;
	width: 8px;
	height: 8px;
	background: #babdb6;
}

</style>

<div id="example"></div>

<div class="uiBox" id="test">
    <div class="top"></div>
    <div class="middle">
        <div class="left"></div>
        <div class="center">I'm not a modal :(</div>
        <div class="right"></div>
    </div>
    <div class="bottom"></div>
</div>

<div class="modal">I'm a modal!</div>
<div class="modal">I'm a modal!</div>

<div class="dialog">This is a nice dialog</div>

<script src="http://code.jquery.com/jquery-latest.js"></script>
<script src="../../trunk/plugins/dimensions/jquery.dimensions.js"></script>
<script src="../../trunk/plugins/ui/ui.js"></script>
<script src="../../trunk/plugins/ui/ui.mouse.js"></script>
<script src="../../trunk/plugins/ui/ui.resize.js"></script>
<script src="../../trunk/plugins/ui/ui.drag.js"></script>
<script>
/* Copyright (c) 2006 Brandon Aaron (brandon.aaron@gmail.com || http://brandonaaron.net)
 * Dual licensed under the MIT (http://www.opensource.org/licenses/mit-license.php) 
 * and GPL (http://www.opensource.org/licenses/gpl-license.php) licenses.
 */

/**
 * Much like the wrap method but wraps the contents of the element.
 * See the docs for wrap...
 * @author Brandon Aaron (brandon.aaron@gmail.com || http://brandonaaron.net)
 */
jQuery.fn.innerWrap = function() {
	var a, args = arguments;
	return this.each(function() {
		if (!a)
			a = jQuery.clean(args, this.ownerDocument);
		// Clone the structure that we're using to wrap
		var b = a[0].cloneNode(true),
		    c = b;
		// Find the deepest point in the wrap structure
		while ( b.firstChild )
			b = b.firstChild;
		// append the child nodes to the wrapper
		jQuery.each(this.childNodes, function(i, node) { 
			b.appendChild(node); 
		});
		jQuery(this)
			// clear the element
			.empty()
			// add the new wrapper with the previous child nodes appeneded
			.append(c);
	});
};

jQuery.fn.uiBox = function(arg){
    return typeof arg == "string" ?
        this.pushStack(jQuery.map(this, function(elem){
            var middle = elem.firstChild.nextSibling;
            return  arg == "top" && elem.firstChild ||
                    arg == "bottom" && elem.lastChild ||
                    arg == "middle" && middle ||
                    arg == "left" && middle.firstChild ||
                    arg == "center" && middle.firstChild.nextSibling ||
                    arg == "right" && middle.lastChild ||
                    null;
        })) :
        this
            .addClass("uiBox")
            .innerWrap("<div class='middle pane'><div class='center pane'></div></div>")
            .prepend("<div class='top pane'></div>")
            .append("<div class='bottom pane'></div>")
            .uiBox("middle")
                .prepend("<div class='left pane'></div>")
                .append("<div class='right pane'></div>")
            .end().each(function(i,elem){
                jQuery.each( arg || {}, function(name, value){
                    jQuery(elem).uiBox(name)
                        [jQuery.isFunction(value) ? "each" : "append"](value);
                });
            });
};

$("div.modal").uiBox({
    top: "top",
    left: "L",
    right: "R",
    bottom: "bottom"
}).height( 200 ).width( 200 );

$("div.dialog").uiBox({
	top: "<span class='left top'>This is a title</span><span class='center top'></span><span class='right top'><img src='window-close.png'/></span>",
	bottom: "<span class='left bottom'></span><span class='center bottom'></span><span class='right bottom'></span>",
}).css({
	height: 300,
	width: 300,
	position: "absolute",
	top: 20,
	right: 30
}).resizable({
	handles: { se: 'div.bottom.pane span.right' }
}).draggable({
	handle: 'div.top.pane span.left'
});
</script>
