<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
	<title>jQuery Autocomplete</title>
	<script type="text/javascript" src="jquery-1.1.2.pack.js"></script>
	<script type='text/javascript' src='jquery.bgiframe.min.js'></script>
	<script type='text/javascript' src='jquery.autocomplete.js'></script>
	<script type='text/javascript' src='localdata.js'></script>
	<link rel="stylesheet" type="text/css" href="main.css" />
	<link rel="stylesheet" type="text/css" href="jquery.autocomplete.css" />
</head>

<body>

<h1>jQuery Autocomplete Mod</h1>

<div id="content">
<p>This is based on Dylan's initial plugin and Dan's and Anjesh' mods.</p>

<h2>Enhancements</h2>
<ul>
	<li>
		Allow multiple selections for both local and remote data.
	</li>
</ul>

<form onsubmit="return false;">
	<p>
		Multiple Cities (local):
		<textarea id='suggest1' cols='40' rows='3'></textarea>
	</p>
	<p>
		Multiple Birds (remote):
		<textarea id='suggest2' cols='40' rows='3'></textarea>
	</p>
	<p>
		Single City (local):
		<input type="text" id="suggest3" value="" />

		<input type="button" value="Get Value" onclick="lookupLocal();" />
		(Shows a max of 10 entries)
	</p>
	<p>
		Single Bird (remote):
		<input type="text" id="suggest4" value="" style="width: 200px;" />
		<input type="button" value="Get Value" onclick="lookupAjax();" />
	</p>
	<p>
		Some dropdown:
		<select name="Test1" id="idTest1">
			<option value="1">Item 12334455</option>
			<option value="2">Item 2</option>
			<option value="3">Item 3</option>
			<option value="4">Item 4</option>
		</select>
	</p>

</form>

<div id="result">

</div>

<script type="text/javascript">
function findValue(li) {
	if( li == null ) return alert("No match!");

	// if coming from an AJAX call, let's use the CityId as the value
	if( !!li.extra ) var sValue = li.extra[0];

	// otherwise, let's just display the value in the text box
	else var sValue = li.selectValue;

	//alert("The value you selected was: " + sValue);
	jQuery("#result").html("Selected: " + sValue);
}

function selectItem(li) {
	findValue(li);
}

function formatItem(row) {
	return row[0] + " (id: " + row[1] + ")";
}

function lookupAjax(){
	var oSuggest = $("#suggest4")[0].autocompleter;
	oSuggest.findValue();
	return false;
}

function lookupLocal(){
	var oSuggest = $("#suggest3")[0].autocompleter;
	oSuggest.findValue();
	return false;
}

$(document).ready(function() {

	$("#suggest1").autocomplete(cities, {
		delay: 10,
		minChars: 1,
		matchSubset: 1,
		onItemSelect: selectItem,
		onFindValue: findValue,
		maxItemsToShow: 10,
		multiple: true
	});

	$("#suggest2").autocomplete('search.php', {
		matchContains: true,
		onItemSelect: selectItem,
		formatItem: formatItem,
		selectOnly: 1,
		multiple: true,
		maxItemsToShow: 10
	});

	$("#suggest3").autocomplete(cities, {
		delay: 10,
		minChars: 1,
		matchSubset: 1,
		onItemSelect: selectItem,
		onFindValue: findValue,
		autoFill: true,
		maxItemsToShow: 10
	});
	
	$("#suggest4").autocomplete("search.php", {
		delay: 10,
		minChars: 2,
		matchSubset: 1,
		matchContains: true,
		onItemSelect: selectItem,
		onFindValue: findValue,
		formatItem: formatItem,
		autoFill: true,
		maxItemsToShow: 10
	});
	
});
</script>

</div>

</body>
</html>
