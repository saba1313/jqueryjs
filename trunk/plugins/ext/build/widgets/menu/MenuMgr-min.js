/*
 * Ext - JS Library 1.0 Alpha 2
 * Copyright(c) 2006-2007, Jack Slocum.
 * 
 * http://www.extjs.com/license.txt
 */

Ext.menu.MenuMgr=function(){var _1,_2,_3={};function init(){_1={},_2=new Ext.util.MixedCollection();var d=Ext.get(document);d.on("mousedown",onMouseDown);d.addKeyListener(27,function(){if(_2.length>0){hideAll();}});}function hideAll(){var c=_2.clone();c.each(function(m){m.hide();});}function onHide(m){_2.remove(m);}function onShow(m){var _9=_2.last();_2.add(m);if(m.parentMenu){m.getEl().setZIndex(parseInt(m.parentMenu.getEl().getStyle("z-index"),10)+3);m.parentMenu.activeChild=m;}else{if(_9&&_9.isVisible()){m.getEl().setZIndex(parseInt(_9.getEl().getStyle("z-index"),10)+3);}}}function onBeforeHide(m){if(m.activeChild){m.activeChild.hide();}if(m.autoHideTimer){clearTimeout(m.autoHideTimer);delete m.autoHideTimer;}}function onBeforeShow(m){var pm=m.parentMenu;if(!pm&&!m.allowOtherMenus){hideAll();}else{if(pm&&pm.activeChild){pm.activeChild.hide();}}}function onMouseDown(e){if(_2.length>0&&!e.getTarget(".x-menu")){hideAll();}}function onBeforeCheck(mi,_f){if(_f){var g=_3[mi.group];for(var i=0,l=g.length;i<l;i++){if(g[i]!=mi){g[i].setChecked(false);}}}}return {register:function(_13){if(!_1){init();}_1[_13.id]=_13;_13.on("beforehide",onBeforeHide);_13.on("hide",onHide);_13.on("beforeshow",onBeforeShow);_13.on("show",onShow);var g=_13.group;if(g&&_13.events["checkchange"]){if(!_3[g]){_3[g]=[];}_3[g].push(_13);_13.on("checkchange",onCheck);}},get:function(_15){if(typeof _15=="string"){return _1[_15];}else{if(_15.events){return _15;}else{return new Ext.menu.Menu(_15);}}},unregister:function(_16){delete _1[_16.id];_16.un("beforehide",onBeforeHide);_16.un("hide",onHide);_16.un("beforeshow",onBeforeShow);_16.un("show",onShow);var g=_16.group;if(g&&_16.events["checkchange"]){_3[g].remove(_16);_16.un("checkchange",onCheck);}},registerCheckable:function(_18){var g=_18.group;if(g){if(!_3[g]){_3[g]=[];}_3[g].push(_18);_18.on("beforecheckchange",onBeforeCheck);}},unregisterCheckable:function(_1a){var g=_1a.group;if(g){_3[g].remove(_1a);_1a.un("beforecheckchange",onBeforeCheck);}}};}();
