<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">

<html lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<title>index</title>
	<meta name="author" content="Yehuda Katz">
	<style type="text/css">
	  @import "http://dev.jquery.com/view/trunk/themes/light/light.toolbar.css";
	</style>
	<script src="http://code.jquery.com/jquery-latest.pack.js"></script>
	<script src="../ui.toolbar.js"></script>
	<script src="../ui.toolbar.ext.js"></script>
	<script>
	$(function(){
	   $("#toolbar").toolbar();
	   $("#toolbar").toolbarAdd({type:'toggle', caption: 'Bold',
		onActivate: function(){
			$.iframeContents("editor").execCommand('bold', false, false);
			$("#editor *").trigger("focus");
              	   }, onDeactivate: function(){
			$.iframeContents("editor").execCommand('bold', false, false);
			$("#editor *").trigger("focus");
	   	}
	   });
	   $("#toolbar").toolbarAdd({type:'toggle', caption: 'Underline',
		onActivate: function(){
			$.iframeContents("editor").execCommand('underline', false, false);
			$("#editor *").trigger("focus");
              	   }, onDeactivate: function(){
			$.iframeContents("editor").execCommand('underline', false, false);
			$("#editor *").trigger("focus");
	   	}
	   });

	   $("#toolbar").toolbarAdd({type:'toggle', caption: 'Italic',
		onActivate: function(){
			$.iframeContents("editor").execCommand('italic', false, false);
			$("#editor").trigger("focus");
              	   }, onDeactivate: function(){
			$.iframeContents("editor").execCommand('italic', false, false);
			$("#editor").trigger("focus");
	   	}
	   });

	});
    $.iframeContents = function(name) {
      return $.browser.msie ? document.frames[name].document : document.getElementById(name).contentDocument;
    };
	
	  window.onload = function() {
	    $.iframeContents("editor").designMode = "on";
	    try { $.iframeContents("editor").execCommand('useCSS', false, false); } catch(ex) {}
	    try { $.iframeContents("editor").execCommand('styleWithCSS', false, false); } catch(ex) {}	    
	    $("button.command").click(function() {
	      $.iframeContents("editor").execCommand(this.name, false, false);
	    });
	    $("button.meta-command[@name=done]").click(function() {
	      alert($.iframeContents("editor").body.innerHTML);
	    });
	  };
	</script>
</head>
<body class="light">
<div style="width:400px;">
  <div id="toolbar"></div>
  <iframe src="designmode.html" id="editor" designmode="on" style="width:100%;"/>
    <button name="done" class="meta-command">Done</button>
</div>
</body>
</html>